{
    "version": "1.1.2-2",
    "description": "A Clash GUI Proxy For Windows Based On .NET 5",
    "homepage": "https://github.com/ClashDotNetFramework/ClashDotNetFramework",
    "license": "Closed source",
    "depends": [
        "dotnet-desktop-runtime"
    ],
    "architecture": {
        "64bit": {
            "url": "https://github.com/ClashDotNetFramework/ClashDotNetFramework/releases/download/v1.1.2/Clash.NET.1.1.2.x64.7z",
            "hash": "bafa05c0eff04f8eb7160c15e9bafcafdf84caceaa751b0fea5038c1e8625df5"
        },
        "32bit": {
            "url": "https://github.com/ClashDotNetFramework/ClashDotNetFramework/releases/download/v1.1.2/Clash.NET.1.1.2.x86.7z",
            "hash": "8906bb8ebca63af23b75eaab07d8637b1b02a53c6a8ca15cbdeca06ed9d499d0"
        }
    },
    "pre_install": [
        "$ClashDotNetPID = Get-Process -name ClashDotNet -ErrorAction Ignore | Select-Object id | ForEach-Object -Process { $_.id }",
        "if ([String]::IsNullOrEmpty($ClashDotNetPID)) {",
        "Write-Output 'Clash .NET is not running.' ",
        "Write-Output '' > $env:temp/ClashDotNetRestart.txt ",
        "}",
        "else {",
        "Write-Output 'Clash .NET is running, stop it and install a new version.' ",
        "Stop-Process $ClashDotNetPID -ErrorAction Ignore",
        "Stop-Process -Name clash -ErrorAction Ignore",
        "Stop-Process -Name SubConverter -ErrorAction Ignore",
        "Write-Output 'Are you OK?' > $env:temp/ClashDotNetRestart.txt ",
        "}"
    ],
    "post_install": [
        "$ClashDotNetBin = $env:home + '/scoop/apps/clashdotnet/current/ClashDotNet.exe'",
        "$NeedRestart = Get-Content $env:temp/ClashDotNetRestart.txt",
        "if ([String]::IsNullOrEmpty($NeedRestart)) {",
        "Remove-Item $env:temp/ClashDotNetRestart.txt",
        "}",
        "else {",
        "Write-Output 'Starting new version of Clash .NET' ",
        "Start-Process $ClashDotNetBin -WindowStyle Minimized",
        "Remove-Item $env:temp/ClashDotNetRestart.txt",
        "}"
    ],
    "shortcuts": [
        [
            "ClashDotNet.exe",
            "Clash .NET"
        ]
    ],
    "extract_dir": "Clash .NET 1.1.2"
}